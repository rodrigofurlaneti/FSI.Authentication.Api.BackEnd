üì¶ src
 ‚îú‚îÄ‚îÄ Clients
 ‚îÇ    ‚îú‚îÄ‚îÄ Web
 ‚îÇ    ‚îú‚îÄ‚îÄ Mobile
 ‚îÇ    ‚îî‚îÄ‚îÄ Partner
 ‚îÇ
 ‚îú‚îÄ‚îÄ Presentation
 ‚îÇ    ‚îú‚îÄ‚îÄ Controllers
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Users
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Expenses
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Categories
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Transactions
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Auth
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Admin
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Base
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Filters
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ ExceptionFilters
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ ValidationFilters
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ ActionFilters
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ AuthorizationFilters
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ ResultFilters
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Middleware
 ‚îÇ    ‚îú‚îÄ‚îÄ Auth
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Jwt
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Policies
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Claims
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Identity
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Providers
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Utils
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ ProblemDetails
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Factory
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Mapping
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Models
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Writers
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Extensions
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Admin
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Controllers
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Services
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Auth
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ DTOs
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Filters
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Models
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Requests
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Responses
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Bindings
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îî‚îÄ‚îÄ Config
 ‚îÇ         ‚îú‚îÄ‚îÄ Swagger
 ‚îÇ         ‚îú‚îÄ‚îÄ Versioning
 ‚îÇ         ‚îú‚îÄ‚îÄ Cors
 ‚îÇ         ‚îú‚îÄ‚îÄ Json
 ‚îÇ         ‚îú‚îÄ‚îÄ RateLimiting
 ‚îÇ         ‚îî‚îÄ‚îÄ HealthChecks
 ‚îÇ
 ‚îú‚îÄ‚îÄ Application
 ‚îÇ    ‚îú‚îÄ‚îÄ DTOs
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Requests
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Responses
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Shared
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Profiles
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Mappers
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Profiles
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Converters
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Resolvers
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Transformers
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Extensions
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Config
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Interfaces
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Repositories
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Services
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Messaging
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ External
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Common
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Services
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ AppServices
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ CommandHandlers
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ QueryHandlers
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Orchestrators
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Decorators
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ UseCases
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Commands
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Queries
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Events
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Pipelines
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Validators
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Features
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Common
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Pipeline
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Handlers
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Commands
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Queries
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Notifications
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Pipeline
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Mappings
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Notifications
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Events
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Publishers
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Handlers
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Adapters
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Outbox
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Policies
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îî‚îÄ‚îÄ Exceptions
 ‚îÇ         ‚îú‚îÄ‚îÄ Types
 ‚îÇ         ‚îú‚îÄ‚îÄ Mapping
 ‚îÇ         ‚îú‚îÄ‚îÄ Translators
 ‚îÇ         ‚îú‚îÄ‚îÄ Middleware
 ‚îÇ         ‚îú‚îÄ‚îÄ Policies
 ‚îÇ         ‚îî‚îÄ‚îÄ Codes
 ‚îÇ
 ‚îú‚îÄ‚îÄ Domain
 ‚îÇ    ‚îú‚îÄ‚îÄ Entities
 ‚îÇ    ‚îú‚îÄ‚îÄ ValueObjects
 ‚îÇ    ‚îú‚îÄ‚îÄ Services
 ‚îÇ    ‚îú‚îÄ‚îÄ Events
 ‚îÇ    ‚îú‚îÄ‚îÄ Specifications
 ‚îÇ    ‚îú‚îÄ‚îÄ Exceptions
 ‚îÇ    ‚îî‚îÄ‚îÄ Aggregates
 ‚îÇ
 ‚îú‚îÄ‚îÄ Infrastructure
 ‚îÇ    ‚îú‚îÄ‚îÄ Repositories
 ‚îÇ    ‚îú‚îÄ‚îÄ Messaging
 ‚îÇ    ‚îú‚îÄ‚îÄ Outbox
 ‚îÇ    ‚îú‚îÄ‚îÄ Persistence
 ‚îÇ    ‚îî‚îÄ‚îÄ Migrations
 ‚îÇ
 ‚îî‚îÄ‚îÄ Worker
      ‚îú‚îÄ‚îÄ Jobs
      ‚îî‚îÄ‚îÄ Consumers


üì¶ src
 ‚îú‚îÄ‚îÄ Clients                          # Camada de clientes que consomem a API
 ‚îÇ    ‚îú‚îÄ‚îÄ Web                         # Aplica√ß√£o Web
 ‚îÇ    ‚îú‚îÄ‚îÄ Mobile                      # Aplicativo Mobile
 ‚îÇ    ‚îî‚îÄ‚îÄ Partner                     # Integra√ß√µes com sistemas/parceiros externos
 ‚îÇ
 ‚îú‚îÄ‚îÄ Presentation                     # Camada de apresenta√ß√£o (API / Controllers)
 ‚îÇ    ‚îú‚îÄ‚îÄ Controllers                 # Endpoints HTTP expostos aos clientes
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Users                  # Controladores de usu√°rios
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Expenses               # Controladores de despesas (sync/async)
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Categories             # Controladores de categorias
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Transactions           # Controladores de transa√ß√µes financeiras
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Auth                   # Autentica√ß√£o/autoriza√ß√£o (login, tokens)
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Admin                  # Endpoints administrativos (monitoramento, jobs)
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Base                   # Controller base com helpers padr√£o
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Filters                     # Filtros globais de requisi√ß√£o/resposta
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ ExceptionFilters        # Converte exce√ß√µes em ProblemDetails
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ ValidationFilters       # Valida√ß√£o de inputs/DTOs
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ ActionFilters           # Logging e auditoria de a√ß√µes
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ AuthorizationFilters    # Regras de autoriza√ß√£o customizadas
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ ResultFilters           # Padroniza formato das respostas
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Middleware                  # Pipeline HTTP (logging, exceptions, tracing)
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Auth                        # Configura√ß√£o de autentica√ß√£o/autoriza√ß√£o
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Jwt                     # Configura√ß√£o JWT (tokens)
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Policies                # Regras de acesso (roles, claims)
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Claims                  # Extens√µes e tipos de claims
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Identity                # Integra√ß√£o com ASP.NET Identity
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Providers               # Login externo (Google, MS, Facebook)
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Utils                   # Utilidades de seguran√ßa (hash, valida√ß√£o)
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ ProblemDetails              # Padroniza√ß√£o de erros (RFC 7807)
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Factory                 # Cria√ß√£o de objetos ProblemDetails
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Mapping                 # Mapeia exceptions ‚Üí problem types
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Models                  # Estruturas extendidas de erros
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Writers                 # Escrita serializada (JSON)
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Extensions              # Helpers e extens√µes de contexto
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Admin                       # APIs administrativas/operacionais
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Controllers             # HealthCheck, Monitoramento, Jobs
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Services                # Servi√ßos de diagn√≥stico e info de build
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Auth                    # Regras extras de autentica√ß√£o admin
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ DTOs                    # Modelos de resposta de health/build
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Filters                 # Auditoria de a√ß√µes administrativas
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Models                      # Modelos de binding (entrada/sa√≠da da API)
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Requests                # Modelos de entrada (POST/PUT)
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Responses               # Modelos de sa√≠da (GET/DTOs de retorno)
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Bindings                # Model binders customizados (arquivos, CSV)
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îî‚îÄ‚îÄ Config                      # Configura√ß√µes auxiliares
 ‚îÇ         ‚îú‚îÄ‚îÄ Swagger                 # Documenta√ß√£o OpenAPI
 ‚îÇ         ‚îú‚îÄ‚îÄ Versioning              # Versionamento da API
 ‚îÇ         ‚îú‚îÄ‚îÄ Cors                    # Pol√≠ticas CORS
 ‚îÇ         ‚îú‚îÄ‚îÄ Json                    # Serializa√ß√£o JSON
 ‚îÇ         ‚îú‚îÄ‚îÄ RateLimiting            # Limite de requisi√ß√µes
 ‚îÇ         ‚îî‚îÄ‚îÄ HealthChecks            # Configura√ß√£o de health checks
 ‚îÇ
 ‚îú‚îÄ‚îÄ Application                      # Camada de aplica√ß√£o (regras de orquestra√ß√£o)
 ‚îÇ    ‚îú‚îÄ‚îÄ DTOs                        # Objetos de transporte (entrada/sa√≠da)
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Requests                # DTOs de entrada
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Responses               # DTOs de sa√≠da
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Shared                  # DTOs comuns/reutiliz√°veis
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Profiles                # Perfis de mapeamento (AutoMapper)
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Mappers                     # Convers√£o entre DTOs e Entities
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Profiles                # Configura√ß√µes de mapping
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Converters              # Convers√µes complexas
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Resolvers               # Resolvedores de propriedades
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Transformers            # Transforma√ß√µes globais
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Extensions              # M√©todos de extens√£o de mapping
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Config                  # Registro de perfis
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Interfaces                  # Contratos da camada Application
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Repositories            # Interfaces de persist√™ncia
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Services                # Interfaces de servi√ßos de aplica√ß√£o
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Messaging               # Interfaces de mensageria
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ External                # Integra√ß√µes externas (gateways)
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Common                  # Interfaces utilit√°rias
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Services                    # Servi√ßos de aplica√ß√£o
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ AppServices             # Orquestram casos de uso
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ CommandHandlers         # Manipulam Commands (escrita)
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ QueryHandlers           # Manipulam Queries (leitura)
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Orchestrators           # Coordenam fluxos complexos
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Decorators              # Cross-cutting concerns (logging, retry)
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ UseCases                    # Casos de uso espec√≠ficos
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Commands                # A√ß√µes de escrita (criar/atualizar/excluir)
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Queries                 # Consultas/leitura
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Events                  # Casos disparados por eventos
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Pipelines               # Fluxos que agrupam m√∫ltiplos casos
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Validators                  # Valida√ß√£o de DTOs e requests
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Features                # Validadores por m√≥dulo/feature
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Common                  # Regras compartilhadas
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Pipeline                # Behaviors de valida√ß√£o em CQRS
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Handlers                    # Manipuladores CQRS
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Commands                # Manipuladores de escrita
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Queries                 # Manipuladores de leitura
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Notifications           # Manipuladores de eventos
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Pipeline                # Pipeline behaviors (valida√ß√£o, log, retry)
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Mappings                # Adapta√ß√£o Command/Query ‚áÑ DTO
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îú‚îÄ‚îÄ Notifications               # Eventos/notifica√ß√µes de aplica√ß√£o
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Events                  # Defini√ß√£o dos eventos
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Publishers              # Publicadores de eventos
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Handlers                # Manipuladores dos eventos
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Adapters                # Adapta√ß√£o de eventos de dom√≠nio
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Outbox                  # Implementa√ß√£o do Outbox pattern
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Policies                # Pol√≠ticas de retry, idempot√™ncia
 ‚îÇ    ‚îÇ
 ‚îÇ    ‚îî‚îÄ‚îÄ Exceptions                  # Exce√ß√µes de aplica√ß√£o
 ‚îÇ         ‚îú‚îÄ‚îÄ Types                   # Tipos de exce√ß√µes
 ‚îÇ         ‚îú‚îÄ‚îÄ Mapping                 # Mapeamento para ProblemDetails
 ‚îÇ         ‚îú‚îÄ‚îÄ Translators             # Tradu√ß√£o Domain/Infra ‚Üí Application
 ‚îÇ         ‚îú‚îÄ‚îÄ Middleware              # Tratamento centralizado
 ‚îÇ         ‚îú‚îÄ‚îÄ Policies                # Pol√≠ticas de erros
 ‚îÇ         ‚îî‚îÄ‚îÄ Codes                   # Cat√°logo de c√≥digos/mensagens
 ‚îÇ
 ‚îú‚îÄ‚îÄ Domain                           # Camada de dom√≠nio (regras de neg√≥cio puras)
 ‚îÇ    ‚îú‚îÄ‚îÄ Entities                    # Entidades com identidade pr√≥pria
 ‚îÇ    ‚îú‚îÄ‚îÄ ValueObjects                # Objetos de valor (imut√°veis, sem identidade)
 ‚îÇ    ‚îú‚îÄ‚îÄ Services                    # Servi√ßos de dom√≠nio (regras de neg√≥cio complexas)
 ‚îÇ    ‚îú‚îÄ‚îÄ Events                      # Eventos de dom√≠nio
 ‚îÇ    ‚îú‚îÄ‚îÄ Specifications              # Regras de neg√≥cio encapsuladas
 ‚îÇ    ‚îú‚îÄ‚îÄ Exceptions                  # Exce√ß√µes de dom√≠nio
 ‚îÇ    ‚îî‚îÄ‚îÄ Aggregates                  # Ra√≠zes de agregados e seus limites
 ‚îÇ
 ‚îú‚îÄ‚îÄ Infrastructure                   # Camada de infraestrutura (implementa√ß√µes t√©cnicas)
 ‚îÇ    ‚îú‚îÄ‚îÄ Repositories                # Implementa√ß√£o de reposit√≥rios (SQL/NoSQL/Procs)
 ‚îÇ    ‚îú‚îÄ‚îÄ Messaging                   # Implementa√ß√£o de filas e mensageria
 ‚îÇ    ‚îú‚îÄ‚îÄ Outbox                      # Processamento de mensagens persistidas (Outbox)
 ‚îÇ    ‚îú‚îÄ‚îÄ Persistence                 # DbContext, conex√µes, unidade de trabalho
 ‚îÇ    ‚îî‚îÄ‚îÄ Migrations                  # Scripts/migra√ß√µes de banco
 ‚îÇ
 ‚îî‚îÄ‚îÄ Worker                           # Processos ass√≠ncronos / background
      ‚îú‚îÄ‚îÄ Jobs                        # Tarefas agendadas (limpeza, auditoria, batch)
      ‚îî‚îÄ‚îÄ Consumers                   # Consumidores de mensagens (RabbitMQ/Kafka)


```mermaid

%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  %% === Clientes ===
  subgraph Clients["Clients"]
    Web["Web App"]
    Mobile["Mobile App"]
    Partner["Parceiros"]
  end

  %% === API / Presentation ===
  subgraph Api["Presentation Layer (API)"]
    Controller["Controllers Auth/JWT ProblemDetails"]
  end

  %% === Core DDD ===
  subgraph DDD["Core Application (DDD)"]
    subgraph Application["Application Layer"]
      UseCases["UseCases"]
      Validators["FluentValidation"]
      DTOs["DTOs / Mappers"]
    end
    subgraph Domain["Domain Layer"]
      Entities["Entities / ValueObjects"]
      Services["Domain Services"]
    end
    subgraph Infrastructure["Infrastructure Layer"]
      Repos["Repositories (Procs)"]
      Messaging["Messaging (Producer/Consumer)"]
    end
  end

  %% === DB & Broker separados ===
  DB[(SQL Server Stored Procedures)]
  Broker{{Message Broker RabbitMQ / Kafka}}

  %% === Worker ===
  subgraph Worker["Worker Layer"]
    Jobs["Jobs (cleanup, audit, etc.)"]
    Consumer["Message Consumers"]
  end

  %% Fluxos principais
  Clients --> Api
  Api --> Application
  Application --> Domain
  Application --> Infrastructure

  %% Infra sa√≠das paralelas
  Infrastructure --> DB
  Infrastructure --> Broker

  %% Worker conex√µes (sem cruzar)
  Worker --> DB
  Worker --> Broker


```

# Application Architecture

```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Application["Application Layer"]
    DTOs["DTOs Entrada/Sa√≠da de Dados Simples e sem l√≥gica de neg√≥cio"]
    Mappers["Mappers Convers√£o DTO ‚áÑ Entities Isolamento entre camadas"]
    Interfaces["Interfaces Contratos p/ Servi√ßos Abstra√ß√µes p/ Domain/Infra"]
    Services["App Services Orquestram casos de uso Chama Domain & Infra Regras de aplica√ß√£o"]
    UseCases["UseCases Casos de Uso espec√≠ficos Fluxo de neg√≥cio orquestrado"]
    Validators["Validators (FluentValidation) Valida√ß√£o de DTOs e Requests"]
    Handlers["Handlers (Command/Query) Implementam CQRS Integra√ß√£o com Mediator"]
    Notifications["Notifications Mensagens de dom√≠nio convertidas p/ app Notifica√ß√£o de erros ou eventos"]
    Exceptions["Exceptions Tratamento de falhas Regras de exce√ß√£o de aplica√ß√£o"]
  end

```

# üìÇ Estrutura e responsabilidades da Application Layer

## DTOs ‚Üí Objetos de transporte, usados para entrada (requests) e sa√≠da (responses) da API. N√£o t√™m l√≥gica de neg√≥cio.

## Mappers ‚Üí Fazem a convers√£o entre DTOs e Entities (Domain). Garantem isolamento entre camadas.

## Interfaces ‚Üí Contratos de servi√ßos, que podem ser implementados por Domain ou Infra.

## Services (Application Services) ‚Üí Cont√™m a l√≥gica de orquestra√ß√£o dos casos de uso, chamando Domain Services e Infra Repositories.

## UseCases ‚Üí Representam cen√°rios de neg√≥cio espec√≠ficos (ex: Criar Usu√°rio, Processar Pagamento).

## Validators (FluentValidation) ‚Üí Valida√ß√£o de DTOs e inputs antes de chegar ao Domain.

## Handlers (CQRS) ‚Üí Implementa√ß√£o de Commands (escrita) e Queries (leitura), geralmente integrados com MediatR.

## Notifications ‚Üí Canal para erros, warnings ou eventos que precisam ser propagados.

## Exceptions ‚Üí Exce√ß√µes de aplica√ß√£o, isolando regras de erro que n√£o pertencem ao Domain.

# Dtos

```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph DTOs["Application/DTOs"]
    direction TB

    subgraph Requests["Requests"]
      R_desc["Entrada da API Valida√ß√£o antes do Domain Somente dados (sem regra)"]
      R_examples["Exemplos: CreateUserRequest UpdateExpenseRequest SearchExpenseRequest"]
    end

    subgraph Responses["Responses"]
      S_desc["Sa√≠da da API Modelos de retorno/pagina√ß√£o Sem l√≥gica de neg√≥cio"]
      S_examples["Exemplos: UserResponse ExpenseSummaryResponse PagedResultResponse"]
    end

    subgraph Shared["Shared / Common (opcional)"]
      Sh_desc["Tipos reutiliz√°veis Endere√ßo, Documento, Pagina√ß√£o, Filtros"]
      Sh_examples["Exemplos: AddressDto DocumentDto PaginationDto FilterDto"]
    end

    subgraph Profiles["Profiles / MappingConfig (opcional)"]
      P_desc["Configura√ß√µes de mapping (AutoMapper) Perfil por agregado / feature"]
      P_examples["Exemplos: UserProfile ExpenseProfile"]
    end
  end

  %% Rela√ß√µes de uso
  Shared --> Requests
  Shared --> Responses
  Profiles --> Requests
  Profiles --> Responses
  Requests --> Responses

```

# Mappers

```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Mappers["Application/Mappers"]
    direction TB

    subgraph Profiles["Profiles"]
      P_desc["Configura√ß√£o de mapeamentos (AutoMapper) Agrupadas por agregado/feature Ex.: UserProfile, ExpenseProfile"]
    end

    subgraph Converters["Converters / TypeConverters"]
      C_desc["Convers√µes complexas DTO ‚áÑ Entity Ex.: string ‚áÑ enum, normaliza√ß√£o de datas"]
    end

    subgraph Resolvers["ValueResolvers / MemberValueResolvers"]
      R_desc["Regras para campos espec√≠ficos Ex.: compor NomeCompleto, calcular Status"]
    end

    subgraph Transformers["ValueTransformers (opcional)"]
      T_desc["Transforma√ß√µes globais de tipo Ex.: trim em strings, UTC ‚áÑ LocalTime"]
    end

    subgraph Extensions["Extensions (opcional)"]
      E_desc["M√©todos de extens√£o p/ facilitar uso Ex.: obj.ToDto(), obj.ToEntity()"]
    end

    subgraph Config["MappingConfig / Registration"]
      MC_desc["Registro central do AutoMapper AddProfiles(), valida√ß√£o de configura√ß√£o"]
    end
  end

  %% Rela√ß√µes
  Profiles --> Converters
  Profiles --> Resolvers
  Profiles --> Transformers
  Extensions --> Profiles
  Config --> Profiles

```


# Interfaces
```mermaid


%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Interfaces["Application/Interfaces"]
    direction TB

    subgraph Repositories["Repositories"]
      R_desc["Contratos p/ acesso a dados Infra implementa Ex.: IUserRepository, IExpenseRepository"]
    end

    subgraph Services["Services"]
      S_desc["Servi√ßos de aplica√ß√£o Usados pela API/Worker Ex.: IEmailService, INotificationService"]
    end

    subgraph Messaging["Messaging (opcional)"]
      M_desc["Contratos p/ mensageria Ex.: IMessageProducer, IMessageConsumer"]
    end

    subgraph External["External / Gateways (opcional)"]
      E_desc["Contratos p/ integra√ß√µes externas Ex.: IPaymentGateway, IAuthProvider"]
    end

    subgraph Common["Common (opcional)"]
      C_desc["Interfaces utilit√°rias/gen√©ricas Ex.: IUnitOfWork, ILoggerAdapter"]
    end
  end

  %% Rela√ß√µes
  Repositories --> Services
  Services --> Messaging
  Messaging --> External
  External --> Common
```

# Services
```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Services["Application/Services"]
    direction TB

    subgraph AppServices["AppServices (Core)"]
      A_desc["Orquestram casos de uso Chamam Domain e Infra Ex.: UserAppService, ExpenseAppService"]
    end

    subgraph CommandHandlers["CommandHandlers (opcional)"]
      CH_desc["Manipulam Commands (escrita) Ex.: CreateUserCommandHandler, DeleteExpenseCommandHandler"]
    end

    subgraph QueryHandlers["QueryHandlers (opcional)"]
      QH_desc["Manipulam Queries (leitura) Ex.: GetUserByIdQueryHandler, GetExpensesByCategoryQueryHandler"]
    end

    subgraph Orchestrators["Orchestrators / Coordinators (opcional)"]
      O_desc["Coordenam fluxos complexos Ex.: CheckoutOrchestrator, ExpenseSyncCoordinator"]
    end

    subgraph Decorators["Decorators / Pipeline (opcional)"]
      D_desc["Cross-cutting concerns Ex.: Logging, Retry, Metrics"]
    end
  end

  %% Rela√ß√µes
  AppServices --> CommandHandlers
  AppServices --> QueryHandlers
  AppServices --> Orchestrators
  AppServices --> Decorators
```

# UseCases
```mermaid

%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph UseCases["Application/UseCases"]
    direction TB

    subgraph Commands["Commands"]
      C_desc["Casos de uso de escrita Create, Update, Delete Ex.: CreateUserCommand, UpdateExpenseCommand"]
    end

    subgraph Queries["Queries"]
      Q_desc["Casos de uso de leitura Consultas e relat√≥rios Ex.: GetUserByIdQuery, GetExpensesByCategoryQuery"]
    end

    subgraph Events["Events / Notifications (opcional)"]
      E_desc["Casos de uso disparados por eventos Ex.: UserCreatedEventHandler, ExpenseDeletedEventHandler"]
    end

    subgraph Pipelines["Pipelines / Interactors (opcional)"]
      P_desc["Fluxos compostos de m√∫ltiplos casos de uso Ex.: CloseMonthInteractor"]
    end
  end

  %% Rela√ß√µes
  Commands --> Queries
  Commands --> Events
  Queries --> Events
  Events --> Pipelines
```

# Validators
```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Validators["Application/Validators"]
    direction TB

    subgraph Features["Features (por m√≥dulo)"]
      UsersV["Users ‚Ä¢ CreateUserRequestValidator ‚Ä¢ UpdateUserRequestValidator"]
      ExpensesV["Expenses ‚Ä¢ CreateExpenseRequestValidator ‚Ä¢ UpdateExpenseRequestValidator"]
      CategoriesV["Categories ‚Ä¢ CreateCategoryRequestValidator"]
    end

    subgraph Common["Common / Shared"]
      Rules["Rules ‚Ä¢ Regras reutiliz√°veis ‚Ä¢ Ex.: CpfRule, EmailRule, MoneyRule"]
      Extensions["Extensions ‚Ä¢ M√©todos de extens√£o FluentValidation ‚Ä¢ Ex.: NotEmptyTrimmed(), ValidEnum()"]
      Messages["Messages / ErrorCodes ‚Ä¢ Mensagens padronizadas ‚Ä¢ Enum de c√≥digos de erro"]
      Helpers["Helpers ‚Ä¢ Utilidades de valida√ß√£o ‚Ä¢ Normaliza√ß√£o, regex, datas"]
    end

    subgraph Pipeline["Pipeline (opcional)"]
      Behavior["ValidationBehavior<TReq,TRes> ‚Ä¢ Executa valida√ß√£o antes do Handler ‚Ä¢ Agrega erros em ProblemDetails"]
      Adapt["Adapters (opcional) ‚Ä¢ Mapeia ValidationFailure ‚Üí Error DTO"]
    end
  end

  %% Rela√ß√µes
  Common --> Features
  Pipeline --> Features
```

# Handlers
```mermaid

%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Handlers["Application/Handlers"]
    direction TB

    subgraph Commands["CommandHandlers (Escrita)"]
      C_desc["Manipulam Commands Create/Update/Delete Transa√ß√£o + UoW Chamam Domain/Repos"]
      C_examples["Ex.: CreateUserCommandHandler UpdateExpenseCommandHandler DeleteCategoryCommandHandler"]
    end

    subgraph Queries["QueryHandlers (Leitura)"]
      Q_desc["Manipulam Queries Consultas otimizadas Proje√ß√µes para DTOs Pagina√ß√£o/Filtros"]
      Q_examples["Ex.: GetUserByIdQueryHandler GetExpensesByCategoryQueryHandler ListTransactionsPagedHandler"]
    end

    subgraph Notifications["NotificationHandlers (Eventos)"]
      N_desc["Reagem a eventos (publish/subscribe) Side-effects: e-mail, auditoria, outbox Integra√ß√£o ass√≠ncrona"]
      N_examples["Ex.: UserCreatedNotificationHandler ExpenseDeletedNotificationHandler"]
    end

    subgraph Pipeline["PipelineBehaviors (opcional)"]
      PB_val["ValidationBehavior Valida Requests antes do Handler"]
      PB_log["LoggingBehavior M√©tricas/Tracing/CorrelationId"]
      PB_retry["RetryBehavior Polly/Resili√™ncia (somente leitura ou idempotente)"]
      PB_perf["PerformanceBehavior Tempo por handler"]
    end

    subgraph Mappings["Mappings (opcional)"]
      MP_desc["Adaptadores entre Command/Query e DTOs Normaliza√ß√£o/Enriquecimento de dados"]
    end
  end

  %% Rela√ß√µes (opcional)
  Pipeline --> Commands
  Pipeline --> Queries
  Notifications --> Commands
  Notifications --> Queries
  Mappings --> Commands
  Mappings --> Queries


```

# Notifications
```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Notifications["Application/Notifications"]
    direction TB

    subgraph Events["Events (Application/Domain‚ÜíApp)"]
      E_desc["Contratos de eventos/notifica√ß√µes Ex.: UserCreated, ExpenseDeleted"]
    end

    subgraph Publishers["Publishers"]
      P_desc["Publicam notifica√ß√µes (in-proc via MediatR ou outbox ‚Üí broker) Ex.: NotificationPublisher"]
    end

    subgraph Handlers["Handlers"]
      H_desc["Reagem aos eventos (side-effects) Ex.: enviar e-mail, auditoria, proje√ß√µes de leitura"]
    end

    subgraph Adapters["Adapters / Translators (opcional)"]
      A_desc["Mapeiam DomainEvent ‚Üí AppNotification Normalizam payloads para fila/API externa"]
    end

    subgraph Outbox["Outbox (opcional)"]
      O_desc["Tabela de sa√≠da transacional Processador de outbox para broker (Rabbit/Kafka)"]
    end

    subgraph Policies["Policies (opcional)"]
      PL_desc["Retry/Backoff/Dead-letter Idempot√™ncia e deduplica√ß√£o"]
    end
  end

  %% Rela√ß√µes
  Events --> Publishers
  Publishers --> Handlers
  Adapters --> Publishers
  Outbox --> Publishers
  Policies --> Handlers
  Policies --> Publishers

  ```

  # Exceptions
  ```mermaid

%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Exceptions["Application/Exceptions"]
    direction TB

    subgraph Types["Types"]
      T_desc["Hierarquia de exce√ß√µes de Aplica√ß√£o ‚Ä¢ ApplicationException (base) ‚Ä¢ ValidationException ‚Ä¢ NotFoundException ‚Ä¢ ConflictException ‚Ä¢ UnauthorizedException ‚Ä¢ ForbiddenException ‚Ä¢ BusinessRuleException"]
    end

    subgraph Mapping["Mapping / ProblemDetails"]
      M_desc["Mapeia Exception ‚Üí ProblemDetails (RFC 7807) ‚Ä¢ status, type, title, detail, instance ‚Ä¢ errorCode, traceId, fieldErrors"]
    end

    subgraph Translators["Translators / Adapters"]
      TR_desc["DomainException ‚Üí ApplicationException InfraException ‚Üí ApplicationException Normaliza√ß√£o e c√≥digos"]
    end

    subgraph Middleware["Middleware / Filters"]
      MW_desc["ExceptionHandlingMiddleware ApiExceptionFilter (opcional) Oculta stack em produ√ß√£o"]
    end

    subgraph Policies["Policies (opcional)"]
      P_desc["Retryable vs NonRetryable Idempot√™ncia/CorrelationId Telemetria/Logging"]
    end

    subgraph Codes["ErrorCodes / Messages"]
      C_desc["Enum de c√≥digos Mensagens padronizadas/i18n Cat√°logo de erros"]
    end
  end

  %% Rela√ß√µes
  Types --> Mapping
  Translators --> Types
  Middleware --> Mapping
  Policies --> Middleware
  Codes --> Mapping

  ```

  # Presentation Layer
```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Presentation["Presentation Layer (API)"]
    direction TB

    subgraph Controllers["Controllers"]
      C_desc["Expondo endpoints REST/GraphQL/gRPC Chamam Application Services ou Handlers Ex.: UserController, ExpenseController"]
    end

    subgraph Filters["Filters"]
      F_desc["Filtros de a√ß√£o e exce√ß√£o Ex.: ApiExceptionFilter, ValidationFilter"]
    end

    subgraph Middleware["Middleware"]
      M_desc["Pipeline HTTP (Request ‚Üí Response) Ex.: ExceptionHandlingMiddleware, CorrelationIdMiddleware"]
    end

    subgraph Auth["Auth / Security"]
      A_desc["Autentica√ß√£o e Autoriza√ß√£o Ex.: JWT Bearer, OAuth2, AuthorizationPolicies"]
    end

    subgraph ProblemDetails["ProblemDetails / Error Handling"]
      PD_desc["Padr√£o RFC 7807 Mapeamento de exce√ß√µes p/ HTTP Ex.: ProblemDetailsFactory, ValidationProblemDetails"]
    end

    subgraph Config["Config"]
      Co_desc["Configura√ß√µes auxiliares da API Ex.: SwaggerConfig, ApiVersioningConfig"]
    end
  end

  %% Rela√ß√µes
  Controllers --> Filters
  Controllers --> Middleware
  Controllers --> Auth
  Controllers --> ProblemDetails
  Controllers --> Config
```

# Controller
```mermaid  

%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Controllers["Presentation/Controllers"]
    direction TB

    subgraph Users["Users"]
      U_desc["UserController CRUD de usu√°rios Gest√£o de perfis e permiss√µes"]
    end

    subgraph Expenses["Expenses"]
      E_sync["ExpenseControllerSync Opera√ß√µes s√≠ncronas (REST direto)"]
      E_async["ExpenseControllerAsync Opera√ß√µes ass√≠ncronas (mensageria, fila)"]
    end

    subgraph Categories["Categories"]
      C_desc["CategoryController Gest√£o de categorias de despesas"]
    end

    subgraph Transactions["Transactions"]
      T_desc["TransactionController Gerencia transa√ß√µes financeiras Ex.: registrar, listar, consultar"]
    end

    subgraph Auth["Auth / Identity"]
      A_auth["AuthController Login, RefreshToken, Logout"]
      A_account["AccountController Cadastro e gerenciamento de contas"]
    end

    subgraph Admin["Admin / Management"]
      Adm_sys["SystemController Status do sistema, health check"]
      Adm_mon["MonitoringController Logs, m√©tricas, auditoria"]
    end

    subgraph Base["Base (opcional)"]
      B_base["ApiControllerBase Helper p/ respostas padronizadas Ex.: Ok(), Problem(), CreatedAt()"]
    end
  end
```

# Filters
```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Filters["Presentation/Filters"]
    direction TB

    subgraph ExceptionFilters["ExceptionFilters"]
      Ex1["ApiExceptionFilter Captura exce√ß√µes ‚Üí ProblemDetails"]
      Ex2["DomainExceptionFilter DomainException ‚Üí ApplicationException"]
    end

    subgraph ValidationFilters["ValidationFilters"]
      V1["ValidationFilter Valida ModelState/DTOs Integra FluentValidation"]
    end

    subgraph ActionFilters["ActionFilters"]
      A1["LoggingActionFilter Log de requests/responses"]
      A2["AuditActionFilter Auditoria de chamadas cr√≠ticas"]
    end

    subgraph AuthorizationFilters["AuthorizationFilters"]
      AU1["RoleAuthorizationFilter Regras customizadas de roles/policies"]
    end

    subgraph ResultFilters["ResultFilters"]
      R1["ResponseWrapperFilter Padroniza formato de resposta (ex.: envelopar em { data, errors })"]
    end
  end
```

# Middleware
```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Middleware["Presentation/Middleware"]
    direction TB

    Ex["ExceptionHandlingMiddleware Captura exce√ß√µes globais ‚Üí ProblemDetails"]
    Corr["CorrelationIdMiddleware Gera e propaga CorrelationId p/ rastreamento"]
    Log["LoggingMiddleware Log de Request/Response + M√©tricas b√°sicas"]
    Time["RequestTimingMiddleware Mede tempo de execu√ß√£o + Telemetria/Tracing"]
    Auth["AuthenticationMiddleware (opcional) Autentica√ß√£o customizada/OAuth2"]
    Rate["RateLimitingMiddleware (opcional) Controle de chamadas Throttling/Quota"]
    Cache["CachingMiddleware (opcional) Cache de respostas"]
    Sec["SecurityHeadersMiddleware (opcional) Headers de seguran√ßa: CSP, CORS, HSTS"]
  end

  ```

  # Auth / Security
```mermaid
  %%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Auth["Presentation/Auth"]
    direction TB

    subgraph Jwt["JWT"]
      J1["JwtAuthenticationConfig Configura√ß√µes (Issuer, Audience, SigningKey)"]
      J2["JwtTokenService Gera√ß√£o e valida√ß√£o de tokens"]
      J3["JwtBearerEventsHandler Eventos do pipeline JWT (OnTokenValidated etc.)"]
    end

    subgraph Policies["Authorization Policies"]
      P1["AuthorizationPolicies Regras baseadas em Roles/Claims/Scopes"]
      P2["PolicyNames Constantes com nomes de pol√≠ticas"]
    end

    subgraph Claims["Claims"]
      C1["ClaimsExtensions Helpers p/ extrair claims do usu√°rio"]
      C2["ClaimTypesCustom Defini√ß√£o de claims customizadas"]
    end

    subgraph Identity["Identity (opcional)"]
      I1["IdentityConfig Configura√ß√£o ASP.NET Identity"]
      I2["ApplicationUser Usu√°rio customizado com propriedades extras"]
    end

    subgraph Providers["External Providers (opcional)"]
      PR1["OAuth2ProviderConfig Integra√ß√£o com Google, Microsoft, Facebook"]
      PR2["ExternalLoginService Servi√ßo de login via provedores externos"]
    end

    subgraph Utils["Utils"]
      U1["PasswordHasher Hash/Salt seguro p/ senhas"]
      U2["TokenValidationParametersFactory Configura√ß√£o centralizada p/ valida√ß√£o de tokens"]
    end
  end
  ```
  # ProblemDetails
  ```mermaid
  %%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph ProblemDetails["Presentation/ProblemDetails"]
    direction TB

    subgraph Factory["Factory"]
      F1["ProblemDetailsFactory Cria ProblemDetails/ValidationProblemDetails"]
      F2["ProblemDetailsOptions Mapa status‚Üítype/title, env, links"]
    end

    subgraph Mapping["Mapping"]
      M1["ExceptionToProblemDetailsMapper Exception ‚Üí ProblemDetails"]
      M2["ErrorCodeToProblemTypeMapper ErrorCode ‚Üí type (URI), title"]
    end

    subgraph Models["Models"]
      Md1["ExtendedProblemDetails + traceId, errorCode, instance, details"]
      Md2["ValidationProblemDetailsEx + fieldErrors (FluentValidation)"]
    end

    subgraph Writers["Writers"]
      W1["ProblemDetailsWriter Serializa√ß√£o: content-type, casing, RFC7807"]
    end

    subgraph Extensions["Extensions"]
      E1["HttpContextProblemExtensions Add traceId/instance/links"]
      E2["ProblemDetailsExtensions Append metadados/c√≥digos"]
    end
  end

  %% Rela√ß√µes
  Factory --> Mapping
  Mapping --> Models
  Writers --> Models
  Extensions --> Factory
  Extensions --> Writers

  ```

  # Admin / Management
  ```mermaid
  %%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Admin["Presentation/Admin"]
    direction TB

    subgraph Controllers["Controllers"]
      Sys["SystemController Health, uptime, build info"]
      Mon["MonitoringController M√©tricas/Tracing/Logs (views)"]
      Dia["DiagnosticsController Dumps, threads, GC (restrito)"]
      Jobs["JobsController Disparo de jobs/reprocessos (auditado)"]
    end

    subgraph Services["Services"]
      Hc["HealthCheckService Aggrega IHealthChecks e depend√™ncias"]
      Dx["DiagnosticsService GC/Threads/Memory/Process info"]
      Build["BuildInfoProvider Vers√£o/commit/data/env"]
    end

    subgraph Auth["Auth"]
      Pol["AdminAuthorizationPolicy Role/Claim obrigat√≥ria"]
      Key["ApiKeyValidator (opcional) Dupla verifica√ß√£o p/ rotas sens√≠veis"]
    end

    subgraph DTOs["DTOs"]
      Hdto["HealthReportDto"]
      Bdto["BuildInfoDto"]
      Jreq["JobTriggerRequest"]
    end

    subgraph Filters["Filters"]
      Aud["AdminAuditActionFilter Auditoria de a√ß√µes administrativas"]
    end
  end

  %% Rela√ß√µes
  Controllers --> Services
  Controllers --> Auth
  Controllers --> DTOs
  Controllers --> Filters
  ```

# Models

```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Models["Presentation/Models"]
    direction TB

    subgraph Requests["Requests"]
      R_auth["Auth LoginModel RefreshTokenModel"]
      R_users["Users CreateUserModel UpdateUserModel"]
      R_exp["Expenses CreateExpenseModel ImportExpensesCsvModel"]
      R_common["Common PaginationModel DateRangeModel"]
    end

    subgraph Responses["Responses"]
      S_users["Users UserViewModel"]
      S_exp["Expenses ExpenseViewModel ExpenseSummaryViewModel"]
      S_common["Common PagedResultModel"]
    end

    subgraph Bindings["Bindings (opcional)"]
      B_custom["CustomModelBinders Enums, datas, CSV"]
      B_multipart["MultipartFormBinders Upload de arquivos"]
    end
  end

  %% Rela√ß√µes
  Requests --> Responses
  Bindings --> Requests
  ```

  # Config
  ```mermaid
  %%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Config["Presentation/Config"]
    direction TB

    subgraph Swagger["Swagger / OpenAPI"]
      Sw1["SwaggerConfig Setup UI/Docs"]
      Sw2["SwaggerAuthConfig JWT/OAuth2 no Swagger"]
    end

    subgraph Versioning["Versioning"]
      V1["ApiVersioningConfig Configura vers√µes v1, v2..."]
      V2["ApiExplorerConfig Integra com Swagger"]
    end

    subgraph Cors["CORS"]
      C1["CorsConfig Define pol√≠ticas de origem"]
    end

    subgraph Json["JSON Serialization"]
      J1["JsonOptionsConfig Config System.Text.Json/Newtonsoft"]
      J2["ProblemDetailsConfig Config RFC7807 p/ erros"]
    end

    subgraph Rate["RateLimiting (opcional)"]
      R1["RateLimitingConfig Restri√ß√£o de requisi√ß√µes"]
    end

    subgraph Health["HealthChecks (opcional)"]
      H1["HealthChecksConfig Registra checks p/ readiness/liveness"]
    end
  end
  ```

  # Domain Layer
```mermaid
  %%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  subgraph Domain["Domain Layer"]
    direction TB

    subgraph Entities["Entities"]
      E1["User"]
      E2["Expense"]
      E3["Transaction"]
      E4["Category"]
    end

    subgraph ValueObjects["ValueObjects"]
      V1["Money"]
      V2["Email"]
      V3["Document (CPF/CNPJ)"]
      V4["DateRange"]
    end

    subgraph Services["Domain Services"]
      S1["ExpenseDomainService"]
      S2["TransactionDomainService"]
    end

    subgraph Events["Domain Events"]
      Ev1["UserCreatedDomainEvent"]
      Ev2["ExpenseDeletedDomainEvent"]
    end

    subgraph Specifications["Specifications (opcional)"]
      Sp1["ExpenseOverLimitSpec"]
      Sp2["ActiveUserSpec"]
    end

    subgraph Exceptions["Exceptions"]
      Ex1["DomainException"]
      Ex2["InvalidMoneyException"]
    end

    subgraph Aggregates["Aggregates"]
      Ag1["ExpenseAggregate"]
      Ag2["TransactionAggregate"]
    end
  end

  %% Rela√ß√µes
  Entities --> ValueObjects
  Entities --> Events
  Aggregates --> Entities
  Services --> Entities
  Services --> ValueObjects
  Specifications --> Entities
  Exceptions --> Entities
  
  ```

  # resumo
```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart TB

  %% ==== Clients ====
  subgraph Clients["Clients"]
    direction TB
    Web["Web App"]
    Mobile["Mobile App"]
    Partner["Parceiros"]
  end

  %% ==== Presentation Layer ====
  subgraph Presentation["Presentation Layer (API)"]
    direction TB

    subgraph Controllers["Controllers"]
      C_Users["Users UserController"]
      C_Expenses["Expenses ExpenseControllerSync ExpenseControllerAsync"]
      C_Categories["Categories CategoryController"]
      C_Transactions["Transactions TransactionController"]
      C_Auth["Auth AuthController AccountController"]
      C_Admin["Admin SystemController MonitoringController DiagnosticsController JobsController"]
      C_Base["Base (opcional) ApiControllerBase"]
    end

    subgraph Filters["Filters"]
      F_Exception["ExceptionFilters ApiExceptionFilter DomainExceptionFilter"]
      F_Validation["ValidationFilters ValidationFilter"]
      F_Action["ActionFilters LoggingActionFilter AuditActionFilter"]
      F_Author["AuthorizationFilters RoleAuthorizationFilter"]
      F_Result["ResultFilters ResponseWrapperFilter"]
    end

    subgraph Middleware["Middleware"]
      MW_Exception["ExceptionHandlingMiddleware"]
      MW_Corr["CorrelationIdMiddleware"]
      MW_Log["LoggingMiddleware"]
      MW_Time["RequestTimingMiddleware"]
      MW_Auth["AuthenticationMiddleware (opcional)"]
      MW_Rate["RateLimitingMiddleware (opcional)"]
      MW_Cache["CachingMiddleware (opcional)"]
      MW_Sec["SecurityHeadersMiddleware (opcional)"]
    end

    subgraph Auth["Auth / Security"]
      A_Jwt["JWT JwtAuthenticationConfig JwtTokenService JwtBearerEventsHandler"]
      A_Policies["Policies AuthorizationPolicies PolicyNames"]
      A_Claims["Claims ClaimsExtensions ClaimTypesCustom"]
      A_Identity["Identity (opcional) IdentityConfig ApplicationUser"]
      A_Providers["External Providers (opcional) OAuth2ProviderConfig ExternalLoginService"]
      A_Utils["Utils PasswordHasher TokenValidationParametersFactory"]
    end

    subgraph ProblemDetails["ProblemDetails (RFC 7807)"]
      PD_Factory["Factory ProblemDetailsFactory ProblemDetailsOptions"]
      PD_Mapping["Mapping ExceptionToProblemDetailsMapper ErrorCodeToProblemTypeMapper"]
      PD_Models["Models ExtendedProblemDetails ValidationProblemDetailsEx"]
      PD_Writers["Writers ProblemDetailsWriter"]
      PD_Ext["Extensions HttpContextProblemExtensions ProblemDetailsExtensions"]
    end

    subgraph Admin["Admin"]
      ADT_DTOs["DTOs HealthReportDto BuildInfoDto JobTriggerRequest"]
      ADT_Services["Services HealthCheckService DiagnosticsService BuildInfoProvider"]
      ADT_Auth["Auth AdminAuthorizationPolicy ApiKeyValidator"]
      ADT_Filters["Filters AdminAuditActionFilter"]
    end

    subgraph Models["Models (opcional)"]
      M_Req["Requests Auth: LoginModel, RefreshTokenModel Users: Create/UpdateUserModel Expenses: CreateExpenseModel, ImportExpensesCsvModel Common: PaginationModel, DateRangeModel"]
      M_Res["Responses Users: UserViewModel Expenses: ExpenseViewModel, ExpenseSummaryViewModel Common: PagedResultModel"]
      M_Bind["Bindings CustomModelBinders MultipartFormBinders"]
    end

    subgraph Config["Config"]
      CFG_Swagger["Swagger SwaggerConfig SwaggerAuthConfig"]
      CFG_Version["Versioning ApiVersioningConfig ApiExplorerConfig"]
      CFG_Cors["CORS CorsConfig"]
      CFG_Json["JSON JsonOptionsConfig ProblemDetailsConfig"]
      CFG_Rate["RateLimiting (opcional) RateLimitingConfig"]
      CFG_Health["HealthChecks (opcional) HealthChecksConfig"]
    end
  end

  %% ==== Application Layer ====
  subgraph Application["Application Layer"]
    direction TB

    subgraph DTOs["DTOs"]
      D_Req["Requests"]
      D_Res["Responses"]
      D_Shared["Shared / Common"]
      D_Profiles["Profiles / MappingConfig (opcional)"]
    end

    subgraph Mappers["Mappers"]
      MAP_Profiles["Profiles"]
      MAP_Conv["Converters / TypeConverters"]
      MAP_Res["Resolvers"]
      MAP_Transf["Transformers (opcional)"]
      MAP_Ext["Extensions (opcional)"]
      MAP_Config["MappingConfig / Registration"]
    end

    subgraph Interfaces["Interfaces"]
      I_Repos["Repositories"]
      I_Services["Services"]
      I_Msg["Messaging (opcional)"]
      I_Ext["External / Gateways (opcional)"]
      I_Common["Common (opcional) IUnitOfWork ILoggerAdapter"]
    end

    subgraph Services["Services"]
      S_App["AppServices (Core)"]
      S_CmdH["CommandHandlers (opcional)"]
      S_QryH["QueryHandlers (opcional)"]
      S_Orch["Orchestrators (opcional)"]
      S_Deco["Decorators / Pipeline (opcional)"]
    end

    subgraph UseCases["UseCases"]
      UC_Cmd["Commands"]
      UC_Qry["Queries"]
      UC_Evt["Events / Notifications (opcional)"]
      UC_Pipe["Pipelines / Interactors (opcional)"]
    end

    subgraph Validators["Validators"]
      V_Features["Features (por m√≥dulo) Users/Expenses/Categories ..."]
      V_Common["Common / Shared Rules Extensions Messages Helpers"]
      V_Beh["Pipeline (opcional) ValidationBehavior ValidationFailureAdapter"]
    end

    subgraph Handlers["Handlers (CQRS)"]
      H_Cmd["CommandHandlers (Escrita)"]
      H_Qry["QueryHandlers (Leitura)"]
      H_Notif["NotificationHandlers (Eventos)"]
      H_Pipe["PipelineBehaviors (opcional) Validation/Logging/Retry/Performance"]
      H_Map["Mappings (opcional)"]
    end

    subgraph Notifications["Notifications"]
      N_Evt["Events"]
      N_Pub["Publishers"]
      N_Hdl["Handlers"]
      N_Adp["Adapters / Translators (opcional)"]
      N_Out["Outbox (opcional)"]
      N_Pol["Policies (opcional)"]
    end

    subgraph Exceptions["Exceptions"]
      E_Types["Types ApplicationException base Validation/NotFound/Conflict/Unauthorized/Forbidden/BusinessRule"]
      E_Map["Mapping / ProblemDetails"]
      E_Tr["Translators Domain/Infra ‚Üí Application"]
      E_MW["Middleware / Filters"]
      E_Pol["Policies (opcional)"]
      E_Codes["ErrorCodes / Messages"]
    end
  end

  %% ==== Domain Layer ====
  subgraph Domain["Domain Layer"]
    direction TB
    D_Entities["Entities User Expense Transaction Category"]
    D_VO["ValueObjects Money Email Document (CPF/CNPJ) DateRange"]
    D_Services["Domain Services ExpenseDomainService TransactionDomainService"]
    D_Events["Domain Events UserCreatedDomainEvent ExpenseDeletedDomainEvent"]
    D_Specs["Specifications (opcional) ExpenseOverLimitSpec ActiveUserSpec"]
    D_Ex["Exceptions DomainException InvalidMoneyException"]
    D_Agg["Aggregates ExpenseAggregate TransactionAggregate"]
  end

  %% ==== Infrastructure Layer ====
  subgraph Infrastructure["Infrastructure Layer"]
    direction TB
    INF_Repos["Repositories (Procs/Dapper/EF) Implementa√ß√µes de I*Repository SQL/Stored Procedures"]
    INF_Msg["Messaging Producer/Consumer Config de filas"]
    INF_Outbox["Outbox Processor"]
    INF_Persist["Persistence DbContext/Connections"]
    INF_Migr["Migrations / Scripts"]
  end

  %% ==== Worker Layer ====
  subgraph Worker["Worker Layer"]
    direction TB
    W_Jobs["Jobs cleanup audit rotinas"]
    W_Consumers["Message Consumers (ass√≠ncrono)"]
  end

  %% ==== Recursos Externos ====
  DB[(SQL Server Stored Procedures)]
  Broker{{Message Broker RabbitMQ / Kafka}}

  %% ==== Fluxos ====
  Clients --> Presentation
  Presentation --> Application
  Application --> Domain
  Application --> Infrastructure
  Infrastructure --> DB
  Infrastructure --> Broker
  Worker --> DB
  Worker --> Broker
```